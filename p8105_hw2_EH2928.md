Data Science 1, Homework 2
================
Emil Hafeez (eh2928)
9/24/2020

## Read in the libraries

# Problem One

Here, we read in the data from the Mr. Trashwheel sheet of an Excel
document, to create a dataframe. Mr. Trash Wheel is great\! I met him
when I lived in Baltimore in 2016 to 2018. I follow him on Instagram.

We specify the data in the sheet, as well as clean the variable names,
drop the rows without dumpster-specific data (which appear to be
subtotals in the original sheet), and then round a variable to the
nearest integer and store that variable respectively as an integer.
That’s it\! In 10 lines\!

``` r
trashwheel_df = 
    read_xlsx(
      path =  "./data/Trash-Wheel-Collection-Totals-8-6-19.xlsx",
      sheet = "Mr. Trash Wheel",
      range = cell_cols("A:N")) %>% 
    janitor::clean_names() %>% 
    drop_na(dumpster) %>% 
    mutate(
        sports_balls = round(sports_balls),
        sports_balls = as.integer(sports_balls)
      )
```

Now, we implement a similar cleaning process as above, though instead
for two years of precipitation data. We also omit rows without
precipitation data, and also add a variable for the year.

``` r
precipitation_2017_df = 
    read_xlsx(
      path =  "./data/Trash-Wheel-Collection-Totals-8-6-19.xlsx",
      sheet = "2017 Precipitation", 
          skip = 1) %>% 
    janitor::clean_names() %>% 
    drop_na(month) %>% 
    mutate(year = 2017) %>% 
  relocate(year, before = month)
```

``` r
precipitation_2018_df = 
    read_xlsx(
      path =  "./data/Trash-Wheel-Collection-Totals-8-6-19.xlsx",
      sheet = "2018 Precipitation", 
          skip = 1) %>% 
    janitor::clean_names() %>% 
    drop_na(month) %>% 
    mutate(year = 2018) %>% 
  relocate(year, before = month)
```

We now combine the 2017 and 2018 datasets, and convert the month into a
character variable. The month-conversion is accomplished with the help
of a ‘helper’ tibble. I vary the order of commands from the demonstrated
code, to cluster the related actions closer (and just to experiment and
make sure it also works that way).

``` r
precipitation_combined_df = 
    bind_rows(precipitation_2018_df, precipitation_2017_df)

month_helper_df = 
    tibble(
        month = 1:12,
        month_name = month.name
    )

precipitation_combined_df =
    left_join(precipitation_combined_df, month_helper_df, by = "month")
```

These data relate information on the date, type, volume, and counts of
various trash collected by Baltimore’s beloved Mr. Trash Wheel.
Additional data sheets include monthly precipitation data, and other
Trash Wheel’s data (the latter of which we do not utilize). Note that in
the Mr. Trash Wheel dataframe, there are 344 rows, and 14 columns.
Meanwhile, the precipitation dataset representing the combination of
2017 and 2018 data has 24 rows and 4 columns. There was 70.33 inches of
precipitation in 2018\!

Mr. Trash Wheel, amazingly, prevented 174.84 tons of trash from entering
the Baltimore Inner Harbor in 2017 and 310.39 tons in 2018. The median
number of sports balls in a 2017 dumpster was 8.

# Problem Two

Here, we focus on NYC Transit data relating to entrances and exits for
each subway station in NYC.

Read and clean the data; retain line, station, name, station latitude /
longitude, routes served, entry, vending, entrance type, and ADA
compliance. Convert the entry variable from character (YES vs NO) to a
logical variable.

``` r
transit_df =
  read_csv(
      "./data/NYC_Transit_Subway_Entrance_And_Exit_Data.csv") %>% 
  janitor::clean_names() %>% 
  select(line:vending, ada, -exit_only) %>% 
  mutate(entry = recode(entry, YES = TRUE, NO = FALSE)) %>% 
  mutate(vending = recode(vending, YES = TRUE, NO = FALSE)) 
```

These data relate information on the NYC subway; it includes variables
for lines, routes, and station characteristics (including ADA
accessibility and location). It has 1868 rows, and 19 columns; the
cleaned data are a subset of the raw data. We’ve selected the subset of
raw data relevant to our task, as well as cleaned the variable names,
and converted two variables to a logical variable (I took the liberty
with “entry”). However, these data are not tidy: the data could be
represented more tidily by condensing all of the route variables into
one, which would also make it feasible to represent distinct line and
station name combinations with fewer rows.

Note that there are 465 distinct stations (by line and station\_name
combination). Only 84 of the 465 distinct stations are ADA compliant.
Something that may also bother you is that only 69 subway entrances
without vending allow entry.

Now, reformat data so that route number and route name are distinct
variables.

``` r
transit_tidy_df =
  transit_df %>% 
  mutate(route8 = (as.character(route8))) %>% 
  mutate(route9 = (as.character(route8))) %>% 
  mutate(route10 = (as.character(route10))) %>% 
  mutate(route11 = (as.character(route11))) %>% 
  pivot_longer(
    route1:route11,
    names_to = "routes_number_served",
    values_to = "routes_name_served"
    ) %>% 
  mutate(routes_number_served = str_remove_all(routes_number_served, "route"))
```

There are 60 stations that are distinct by their line and station name
which serve the A train. Of these, only 84 are ADA compliant.

# Problem Three

First, clean the data in the pols-month CSV. Use separate() to break up
the variable mon into integer variables year, month, and day; replace
month number with month name. Then, create a president variable taking
values gop and dem. Then, remove prez\_dem and prez\_gop; and remove the
day variable.

``` r
pols_month_df =
  read_csv(
      "./data/fivethirtyeight_datasets/pols-month.csv") %>% 
  janitor::clean_names() %>% 
  separate(mon, into = c("year", "month", "day")) %>% 
  mutate(month = as.numeric(month)) 
```

    ## Parsed with column specification:
    ## cols(
    ##   mon = col_date(format = ""),
    ##   prez_gop = col_double(),
    ##   gov_gop = col_double(),
    ##   sen_gop = col_double(),
    ##   rep_gop = col_double(),
    ##   prez_dem = col_double(),
    ##   gov_dem = col_double(),
    ##   sen_dem = col_double(),
    ##   rep_dem = col_double()
    ## )

``` r
pols_month_df =
  left_join(pols_month_df, month_helper_df, by = "month") %>% 
  relocate(month_name, before = month) %>% 
  select(-month) %>% 
  mutate(
      prez_dem = recode(prez_dem, `1` = "dem", "0" = "gop")
      ) %>% 
  rename(president = prez_dem) %>% 
  select(-prez_gop, day)
```
